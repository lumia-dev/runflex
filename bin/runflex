#!/usr/bin/env bash

module load Python/3.7.0-anaconda-5.3.0-extras-nsc1
export RUNFLEX_PATH="/proj/flexpart_aerosol/runflex"

# Make sure that the runflex library path is in the PYTHONPATH
export PYTHONPATH=$RUNFLEX_PATH:$PYTHONPATH

# Tetralith-specific stuff
if [[ "$HOSTNAME" =~ tetralith[0-9]\.nsc\.liu\.se ]]    # detect if we are on a login node
then
    export INTERACTIVE=T
    export RUNFLEX_NCPUS=1
    export SNIC_TMP=/proj/flexpart_aerosol/users/$USER
else
    export INTERACTIVE=F
    export RUNFLEX_NCPUS=$SLURM_NTASKS
fi

export RUNFLEX_SCRATCH=${SNIC_TMP}

#shift $(expr $OPTIND - 1 )
$command $@